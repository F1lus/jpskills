{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\M\\xE1rk\\\\Documents\\\\GitHub\\\\jpskills\\\\client\\\\src\\\\components\\\\exams\\\\modify\\\\ModifyPic.js\";\nimport React, { useState } from 'react';\nimport Modal from 'react-modal';\nimport API from '../../BackendAPI';\nimport 'react-pdf/dist/esm/Page/AnnotationLayer.css';\nModal.setAppElement('#root');\nexport default function ModifyPic(props) {\n  const exam = props.exam;\n  const picture = props.picture;\n  const questionId = props.questionId;\n  const [show, setShow] = useState(false);\n  const [img, setImg] = useState(null);\n  const [alert, setAlert] = useState(null);\n\n  const open = () => setShow(true);\n\n  const close = () => setShow(false);\n\n  function handleChange(event) {\n    setImg(event.target.files[0]);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (img) {\n      const data = new FormData();\n      data.append('questionModifyId', questionId);\n      data.append('newPic', img);\n      API.post(`/exams/modify/${exam}`, data, {\n        headers: {\n          'Content-Type': `multipart/form-data; boundary=${data._boundary}`\n        }\n      }).then(response => {\n        if (response.data.error) {\n          if (response.data.error === 'invalid_mime') {\n            setAlert('A kép kiterjesztése nem megfelelő! (Szükséges: JPEG/PNG)');\n          } else if (response.data.error === 'oversize') {\n            setAlert('A kép mérete túl nagy!');\n          }\n        } else if (!response.data.updated) {\n          setAlert('Hiba történt a feltöltéskor, kérjük próbálja újra!');\n        } else {\n          props.socket.emit('exam-modified');\n          setAlert(null);\n        }\n      });\n    }\n  }\n\n  function createImage() {\n    const arrayBufferView = new Uint8Array(picture);\n    const blob = new Blob([arrayBufferView], {\n      type: 'image/jpeg'\n    });\n    const urlCreator = window.URL || window.webkitURL;\n    return urlCreator.createObjectURL(blob);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-warning m-3\",\n    onClick: open,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"K\\xE9p m\\xF3dos\\xEDt\\xE1sa\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: show,\n    onRequestClose: close,\n    style: {\n      overlay: {\n        marginTop: \"30px\",\n        backgroundColor: \"rgba(0,0,0,0.3)\",\n        backdropFilter: \"blur(6px)\"\n      },\n      content: {\n        textAlign: \"center\"\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }\n  }, picture == null ? 'Nincs feltöltött kép' : /*#__PURE__*/React.createElement(\"img\", {\n    className: \"img-fluid\",\n    src: createImage(),\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 61\n    }\n  }), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-warning mt-3\",\n    value: \"L\\xE9trehoz\\xE1s\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, \"M\\xF3dos\\xEDt\\xE1s\"))), alert ? /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"alert alert-secondary mt-3 text-center\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 26\n    }\n  }, alert) : /*#__PURE__*/React.createElement(React.Fragment, null)));\n}","map":{"version":3,"sources":["C:/Users/Márk/Documents/GitHub/jpskills/client/src/components/exams/modify/ModifyPic.js"],"names":["React","useState","Modal","API","setAppElement","ModifyPic","props","exam","picture","questionId","show","setShow","img","setImg","alert","setAlert","open","close","handleChange","event","target","files","handleSubmit","preventDefault","data","FormData","append","post","headers","_boundary","then","response","error","updated","socket","emit","createImage","arrayBufferView","Uint8Array","blob","Blob","type","urlCreator","window","URL","webkitURL","createObjectURL","overlay","marginTop","backgroundColor","backdropFilter","content","textAlign"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport Modal from 'react-modal'\r\n\r\nimport API from '../../BackendAPI'\r\n\r\nimport 'react-pdf/dist/esm/Page/AnnotationLayer.css';\r\n\r\nModal.setAppElement('#root')\r\n\r\nexport default function ModifyPic(props) {\r\n\r\n    const exam = props.exam\r\n    const picture = props.picture\r\n    const questionId = props.questionId\r\n\r\n    const [show, setShow] = useState(false)\r\n    const[img, setImg] = useState(null)\r\n    const [alert, setAlert] = useState(null)\r\n\r\n    const open = () => setShow(true)\r\n    const close = () => setShow(false)\r\n\r\n    function handleChange(event){\r\n        setImg(event.target.files[0])\r\n    }\r\n\r\n    function handleSubmit(event){\r\n        event.preventDefault()\r\n        if(img){\r\n\r\n            const data = new FormData()\r\n            data.append('questionModifyId', questionId)\r\n            data.append('newPic', img)\r\n\r\n            API.post(`/exams/modify/${exam}`, data, {headers: {'Content-Type': `multipart/form-data; boundary=${data._boundary}`}})\r\n            .then(response => {\r\n                if(response.data.error){\r\n                    if(response.data.error === 'invalid_mime'){\r\n                        setAlert('A kép kiterjesztése nem megfelelő! (Szükséges: JPEG/PNG)')\r\n                    }else if(response.data.error === 'oversize'){\r\n                        setAlert('A kép mérete túl nagy!')\r\n                    }\r\n                }else if(!response.data.updated){\r\n                    setAlert('Hiba történt a feltöltéskor, kérjük próbálja újra!')\r\n                }else{\r\n                    props.socket.emit('exam-modified')\r\n                    setAlert(null)\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    function createImage(){\r\n        const arrayBufferView = new Uint8Array(picture)\r\n        const blob = new Blob([arrayBufferView], {type: 'image/jpeg'}) \r\n        const urlCreator = window.URL || window.webkitURL\r\n\r\n        return urlCreator.createObjectURL(blob)\r\n    }\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <button className=\"btn btn-warning m-3\" onClick={open}>\r\n                Kép módosítása\r\n            </button>\r\n\r\n            <Modal isOpen={show} onRequestClose={close}\r\n            style={\r\n                {\r\n                    overlay: {\r\n                        marginTop: \"30px\",\r\n                        backgroundColor: \"rgba(0,0,0,0.3)\",\r\n                        backdropFilter: \"blur(6px)\",\r\n                    },\r\n                    content: {\r\n                        textAlign: \"center\"\r\n                    }\r\n                }\r\n            }>\r\n                {picture == null ? 'Nincs feltöltött kép' : <img className='img-fluid' src={createImage()} alt=''/>}\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"container\">\r\n                        <input type=\"file\" onChange={handleChange}/>\r\n                    </div>\r\n                    <div className=\"container text-center\">\r\n                        <button type=\"submit\" className=\"btn btn-warning mt-3\" value=\"Létrehozás\">Módosítás</button>\r\n                    </div>\r\n                </form>\r\n\r\n                {alert ? <h3 className=\"alert alert-secondary mt-3 text-center\" role=\"alert\">{alert}</h3> : <></>}\r\n\r\n            </Modal>\r\n        </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}